---
- name: Deploy haproxy load balancer
# Use both host groups so override can be used in the dynamic inventory. Makes for a cleaner inventory
  hosts:
    - load_balancers
    - meta-load_balancers_AnsibleGroup
  gather_facts: false 
  become: true

  tags:
    - load_balancers
  
  vars:
    firewall_tcp_port:
      - 80

  roles:
    - dns
    - register_satellite
    - firewall
    - haproxy